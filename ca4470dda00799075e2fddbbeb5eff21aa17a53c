{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "79de4b8b_ebe82f75",
        "filename": "runtime/Android.bp",
        "patchSetId": 10
      },
      "lineNbr": 481,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2022-03-14T09:18:16Z",
      "side": 1,
      "message": "We really try hard to avoid new dependencies in the ART module. If uploading odsign stats require new library dependencies, we should discuss where else to put the uploading instead.",
      "range": {
        "startLine": 480,
        "startChar": 0,
        "endLine": 481,
        "endChar": 31
      },
      "revId": "ca4470dda00799075e2fddbbeb5eff21aa17a53c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c2c13fb_8d5758f2",
        "filename": "runtime/Android.bp",
        "patchSetId": 10
      },
      "lineNbr": 481,
      "author": {
        "id": 1897307
      },
      "writtenOn": "2022-03-14T09:30:08Z",
      "side": 1,
      "message": "I don\u0027t see how we can get away with using the proto library since the processing is done using proto. (I was using a normal txt processing before, but the suggestion was to use proto).\n\nThe uploading has to be done after statsd has started \u0026 since uploading odrefresh metrics is also here, I thought I could just add it here. Any suggestion on where else we can upload?\n\n@Alan",
      "parentUuid": "79de4b8b_ebe82f75",
      "range": {
        "startLine": 480,
        "startChar": 0,
        "endLine": 481,
        "endChar": 31
      },
      "revId": "ca4470dda00799075e2fddbbeb5eff21aa17a53c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "74844aae_10bce050",
        "filename": "runtime/Android.bp",
        "patchSetId": 10
      },
      "lineNbr": 481,
      "author": {
        "id": 1038443
      },
      "writtenOn": "2022-03-14T09:32:05Z",
      "side": 1,
      "message": "Can we do something similar to odrefresh? We did not need extra libraries for it.\n\nThe other option for uploading I think would be in system server.",
      "parentUuid": "3c2c13fb_8d5758f2",
      "range": {
        "startLine": 480,
        "startChar": 0,
        "endLine": 481,
        "endChar": 31
      },
      "revId": "ca4470dda00799075e2fddbbeb5eff21aa17a53c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4cb2a1d1_af77bc89",
        "filename": "runtime/Android.bp",
        "patchSetId": 10
      },
      "lineNbr": 481,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-03-14T09:59:46Z",
      "side": 1,
      "message": "Odrefresh uses a text file to avoid the dependency, I think? As in art/odrefresh/odr_metrics_record.cc. (With some interesting code generation funkiness for enums: http://cs/android-internal/art/odrefresh/Android.bp?l\u003d91\u0026rcl\u003d39f6d00b731c8e043d984c4f508e72b1f9fc54a6)\n\nShikha: That seems reasonable, if we want to avoid the proto dependency.",
      "parentUuid": "74844aae_10bce050",
      "range": {
        "startLine": 480,
        "startChar": 0,
        "endLine": 481,
        "endChar": 31
      },
      "revId": "ca4470dda00799075e2fddbbeb5eff21aa17a53c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aa6dcfe8_9e4fec85",
        "filename": "runtime/Android.bp",
        "patchSetId": 10
      },
      "lineNbr": 481,
      "author": {
        "id": 1897307
      },
      "writtenOn": "2022-03-14T11:15:51Z",
      "side": 1,
      "message": "We can change the file back to text \u0026 remove the 2 proto related libs. \n\nBut we will continue the dependency on libstatslog_art (which odrefresh also use). Coding vise this looks like an easier option. Wanted to check if everyone is okay with it.\n\ncc++ rpl@ for odrefresh metrics",
      "parentUuid": "4cb2a1d1_af77bc89",
      "range": {
        "startLine": 480,
        "startChar": 0,
        "endLine": 481,
        "endChar": 31
      },
      "revId": "ca4470dda00799075e2fddbbeb5eff21aa17a53c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "34bab6d6_3486728b",
        "filename": "runtime/Android.bp",
        "patchSetId": 10
      },
      "lineNbr": 481,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2022-03-14T18:00:12Z",
      "side": 1,
      "message": "The odrefresh case is simpler I supposed, since both the producer and consumers are in the ART module?  Since odsign is not part of ART module, using protobuf seems easier to maintain for backward/forward compatibility than text.  But I don\u0027t know the cost to have such an extra dependency.  Is using text a good trade-off?",
      "parentUuid": "aa6dcfe8_9e4fec85",
      "range": {
        "startLine": 480,
        "startChar": 0,
        "endLine": 481,
        "endChar": 31
      },
      "revId": "ca4470dda00799075e2fddbbeb5eff21aa17a53c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}
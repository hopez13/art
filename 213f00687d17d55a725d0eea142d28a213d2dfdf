{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "fc7175ba_9a245fe9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1067098
      },
      "writtenOn": "2022-03-04T02:50:51Z",
      "side": 1,
      "message": "Looks like the presubmit failures are real. From one of the cuttlefish boot logs:\n\n[   10.577886] apexd: Found two apex packages /system/apex/com.google.android.os.statsd.apex and /system/apex/com.android.os.statsd.apex with the same module name com.android.os.statsd\n\nI guess we would need to somehow suppress this dependency in the case where ART is not a prebuilt and statsd is? For now I\u0027ll just add this dependency to my target I suppose.",
      "revId": "213f00687d17d55a725d0eea142d28a213d2dfdf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce357ac0_bf51b052",
        "filename": "build/apex/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 284,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2022-02-09T08:48:19Z",
      "side": 1,
      "message": "This setup is incompatible with prebuilts (whos build rules do not add the corresponding required apexes). That may not be a problem for Peter\u0027s use case  though, but in general I\u0027d recommend \"required\" on apexes.",
      "range": {
        "startLine": 282,
        "startChar": 15,
        "endLine": 284,
        "endChar": 32
      },
      "revId": "213f00687d17d55a725d0eea142d28a213d2dfdf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b07c7d8f_e9e51ad0",
        "filename": "build/apex/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 284,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-02-09T08:53:17Z",
      "side": 1,
      "message": "Good point, but doesn\u0027t it work to add them on the prebuilt apex_set modules as well?",
      "parentUuid": "ce357ac0_bf51b052",
      "range": {
        "startLine": 282,
        "startChar": 15,
        "endLine": 284,
        "endChar": 32
      },
      "revId": "213f00687d17d55a725d0eea142d28a213d2dfdf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2df41dee_22b22f8d",
        "filename": "build/apex/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 284,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2022-02-09T08:57:34Z",
      "side": 1,
      "message": "The google variants, yes probably. But it\u0027s a problem to have to duplicate rules on the apex_set. It doesn\u0027t usually happen, so I would recommend against depending on it.",
      "parentUuid": "b07c7d8f_e9e51ad0",
      "range": {
        "startLine": 282,
        "startChar": 15,
        "endLine": 284,
        "endChar": 32
      },
      "revId": "213f00687d17d55a725d0eea142d28a213d2dfdf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eaa2ab34_c8476d04",
        "filename": "build/apex/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 284,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-02-09T09:24:54Z",
      "side": 1,
      "message": "Yeah, then the runtime_libart.mk approach may be better after all, although it is a bit of an oddball way to track dependencies.\n\nIn that case I think it\u0027d be a bit odd to remove it from base_system.mk, because it\u0027s far from an ART-specific dependency. However now I see that com.android.runtime is handled in exactly that way already, so whatever.",
      "parentUuid": "2df41dee_22b22f8d",
      "range": {
        "startLine": 282,
        "startChar": 15,
        "endLine": 284,
        "endChar": 32
      },
      "revId": "213f00687d17d55a725d0eea142d28a213d2dfdf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4e48119_6b8d8120",
        "filename": "build/apex/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 284,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2022-02-09T09:33:47Z",
      "side": 1,
      "message": "I think it\u0027s fine to add here as well if it solves Peter\u0027s problem (presumably his device doesn\u0027t use prebuilts), as long as base_system.mk is left as-is.",
      "parentUuid": "eaa2ab34_c8476d04",
      "range": {
        "startLine": 282,
        "startChar": 15,
        "endLine": 284,
        "endChar": 32
      },
      "revId": "213f00687d17d55a725d0eea142d28a213d2dfdf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed288553_5b5d3015",
        "filename": "build/apex/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 284,
      "author": {
        "id": 1067098
      },
      "writtenOn": "2022-02-09T19:52:20Z",
      "side": 1,
      "message": "No, the device doesn\u0027t use prebuilts.\n\nIf we want to make this work with prebuilts maybe there should be a defaults with the required clause shared between this and the prebuilts? That seems like it should be done separately though and getting the dependencies right in the non-prebuilt case seems better than nothing.",
      "parentUuid": "d4e48119_6b8d8120",
      "range": {
        "startLine": 282,
        "startChar": 15,
        "endLine": 284,
        "endChar": 32
      },
      "revId": "213f00687d17d55a725d0eea142d28a213d2dfdf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cfd6cd7b_c80cadf7",
        "filename": "build/apex/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 284,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-02-09T20:13:32Z",
      "side": 1,
      "message": "I\u0027m not sure it\u0027s possible to have a defaults that both `apex` and `apex_set` can use, but we could use a plain variable to share the list of required modules.\n\nThis is fine with me.",
      "parentUuid": "ed288553_5b5d3015",
      "range": {
        "startLine": 282,
        "startChar": 15,
        "endLine": 284,
        "endChar": 32
      },
      "revId": "213f00687d17d55a725d0eea142d28a213d2dfdf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}
{
  "comments": [
    {
      "key": {
        "uuid": "f8f4ce42_ff95bf47",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 15,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2015-07-07T12:25:09Z",
      "side": 1,
      "message": "Nit: long line.",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 74
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1840c241_f095e047",
        "filename": "compiler/dex/quick/dex_file_method_inliner.cc",
        "patchSetId": 4
      },
      "lineNbr": 591,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2015-07-07T12:25:09Z",
      "side": 1,
      "message": "Maybe document that Quick does not implement this intrinsic?",
      "range": {
        "startLine": 591,
        "startChar": 6,
        "endLine": 591,
        "endChar": 19
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f8f4ce42_1f8aa321",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 865,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2015-07-07T12:25:09Z",
      "side": 1,
      "message": "Nit: end comment-sentences with a \".\"?",
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d8fb8a32_feab815e",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 870,
      "author": {
        "id": 1033066
      },
      "writtenOn": "2015-07-07T11:37:03Z",
      "side": 1,
      "message": "Too many temps may cause unnecessary spills, this can be done easily with 3 temps with some reuse.",
      "range": {
        "startLine": 865,
        "startChar": 0,
        "endLine": 870,
        "endChar": 51
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f8f4ce42_bf9f3764",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 870,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2015-07-07T12:25:09Z",
      "side": 1,
      "message": "Maybe use a loop instead?",
      "range": {
        "startLine": 866,
        "startChar": 0,
        "endLine": 870,
        "endChar": 51
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1840c241_903d7499",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 872,
      "author": {
        "id": 1033066
      },
      "writtenOn": "2015-07-07T11:37:03Z",
      "side": 1,
      "message": "Why R0?",
      "range": {
        "startLine": 872,
        "startChar": 47,
        "endLine": 872,
        "endChar": 49
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f8f4ce42_7f81afd7",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 894,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2015-07-07T12:25:09Z",
      "side": 1,
      "message": "Replace with\n\n  uint32_t count_offset \u003d mirror::String::CountOffset().Int32Value();\n  uint32_t value_offset \u003d mirror::String::ValueOffset().Int32Value();\n\nand adjust users?",
      "range": {
        "startLine": 893,
        "startChar": 0,
        "endLine": 894,
        "endChar": 66
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1840c241_70ed7087",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 900,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2015-07-07T12:25:09Z",
      "side": 1,
      "message": "This pattern occurs several times in this code.  Instead of using `it`, what about factoring the loads like this:\n\n  Label return_false;\n\n  // ...\n\n  // Check if input is null, return false if so.\n  __ cmp(argument, ShifterOperand(0));\n  __ b(\u0026return_false, EQ);\n \n  // ...\n\n  // (Likewise for `klass_` field comparison, String lengths comparison, etc.)\n\n  // ...\n\n  __ Bind(\u0026return_false);\n  __ LoadImmediate(out, 0, EQ);\n  __ b(\u0026end);\n\n?",
      "range": {
        "startLine": 897,
        "startChar": 0,
        "endLine": 900,
        "endChar": 17
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1840c241_50902c51",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 904,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2015-07-07T12:25:09Z",
      "side": 1,
      "message": "Receiver",
      "range": {
        "startLine": 904,
        "startChar": 5,
        "endLine": 904,
        "endChar": 13
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f8f4ce42_ff7edf8d",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 905,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2015-07-07T12:25:09Z",
      "side": 1,
      "message": "Ditto.",
      "range": {
        "startLine": 905,
        "startChar": 74,
        "endLine": 905,
        "endChar": 82
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f8f4ce42_3f7b2772",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 906,
      "author": {
        "id": 1033066
      },
      "writtenOn": "2015-07-07T11:37:03Z",
      "side": 1,
      "message": "Is there an explicit null check for the invoke? It could be an implicit check on this LDR but it needs to be moved before the \"argument\u003d\u003dnull\" check above.",
      "range": {
        "startLine": 906,
        "startChar": 2,
        "endLine": 906,
        "endChar": 33
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18f28255_c050de56",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 907,
      "author": {
        "id": 1033066
      },
      "writtenOn": "2015-07-07T11:37:03Z",
      "side": 1,
      "message": "Don\u0027t use implicit class_offset\u003d\u003d0, make it explicit.",
      "range": {
        "startLine": 907,
        "startChar": 19,
        "endLine": 907,
        "endChar": 36
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18f28255_a074baf4",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 907,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2015-07-07T12:25:09Z",
      "side": 1,
      "message": "You\u0027re loading the `klass_` fields, right?  If so, this should be more explicit IMO (even if `class_offset` is known to be zero):\n\n  __ ldr(temp_str, Address(str, class_offset));\n  __ ldr(temp_arg, Address(arg, class_offset));\n\n\nwith `class_offset` defined earlier as:\n\n  uint32_t class_offset \u003d mirror::Object::ClassOffset().Int32Value();",
      "range": {
        "startLine": 906,
        "startChar": 0,
        "endLine": 907,
        "endChar": 37
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18f28255_2062ea36",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 914,
      "author": {
        "id": 1033066
      },
      "writtenOn": "2015-07-07T11:37:03Z",
      "side": 1,
      "message": "The string length is 32-bit.",
      "range": {
        "startLine": 914,
        "startChar": 5,
        "endLine": 914,
        "endChar": 9
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f8f4ce42_ff46df24",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 926,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2015-07-07T12:25:09Z",
      "side": 1,
      "message": "Likewise, maybe use\n\n  __ cmp(count_str, ShifterOperand(count_arg));\n  __ b(\u0026return_true  NE);\n\n  // ...\n\n  __ Bind(\u0026return_true);\n  __ LoadImmediate(out, 1);\n  __ b(\u0026end)\n\n?",
      "range": {
        "startLine": 923,
        "startChar": 0,
        "endLine": 926,
        "endChar": 17
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1840c241_1052a4e0",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 933,
      "author": {
        "id": 1033066
      },
      "writtenOn": "2015-07-07T11:37:03Z",
      "side": 1,
      "message": "Compare 2 characters at a time, please.\n\nThanks to value_offset%4\u003d\u003d0, we can start comparing characters two at a time without any hassle. And thanks to kObjectAlignment%4\u003d\u003d0 all strings with an odd length will be zero-padded, so we can use 32-bit comparison even for the last character. (Use static_assert or DCHECK for those assumptions.)",
      "range": {
        "startLine": 933,
        "startChar": 2,
        "endLine": 933,
        "endChar": 51
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18f28255_e3f64cce",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 935,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2015-07-07T12:25:09Z",
      "side": 1,
      "message": "sizeof(uint16_t)?",
      "range": {
        "startLine": 935,
        "startChar": 33,
        "endLine": 935,
        "endChar": 34
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d829ca86_2ece6727",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 936,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2015-07-07T12:25:09Z",
      "side": 1,
      "message": "Ditto?",
      "range": {
        "startLine": 936,
        "startChar": 34,
        "endLine": 936,
        "endChar": 35
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "782e1e92_6b2581b8",
        "filename": "compiler/optimizing/intrinsics_arm.cc",
        "patchSetId": 4
      },
      "lineNbr": 939,
      "author": {
        "id": 1018108
      },
      "writtenOn": "2015-07-08T14:56:20Z",
      "side": 1,
      "message": "This is really hurting benchmarks for long strings. Either use the return_false and return_true labels as suggested by Roland, or (since you\u0027ve already used SUBS instead of CMP here)  you can go really tricky: change all the \"CMP ...\" above to \"SUBS out, ...\" as well, change the exit sequence to\n\n  // Calculate \"out \u003d (out \u003d\u003d 0) ? 1 : 0\" using RSB+ADC.\n  is_zero:\n    RSB temp, out, #0\n    ADC out, out, temp\n  // End of code.\n  end:\n\nand change all the \"ITcc+MOV out, #0+Bcc end\" sequences to \"Bcc is_zero\" or \"Bcc end\" as needed. Use Location::kNoOutputOverlap for \"out\" to avoid ugly surprises.",
      "range": {
        "startLine": 938,
        "startChar": 0,
        "endLine": 939,
        "endChar": 31
      },
      "revId": "bd824548c571a9fc51ee0bf1b6fe3c38742163a8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}